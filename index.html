<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Telegram Avatar</title>
  <style>
    #avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
    }
  </style>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h1>Telegram Avatar</h1>
  <img id="avatar" src="" alt="Avatar">
  <script>
    // Получить ID пользователя Telegram
    const userId = window.Telegram.WebApp.initDataUnsafe.user.id;

    // Получить аватарку пользователя по его ID
    fetch(`https://api.telegram.org/bot${process.env.TELEGRAM_BOT_TOKEN}/getUserProfilePhotos?user_id=${userId}`)
     .then(response => response.json())
     .then(data => {
        if (data.result.photos) {
          const photoUrl = data.result.photos[0].file_id;
          fetch(`https://api.telegram.org/file/bot${process.env.TELEGRAM_BOT_TOKEN}/${photoUrl}`)
           .then(response => response.blob())
           .then(blob => {
              const avatarUrl = URL.createObjectURL(blob);
              document.getElementById('avatar').src = avatarUrl;
            });
        }
      })
     .catch(error => console.error(error));
  </script>
</body>
</html>
